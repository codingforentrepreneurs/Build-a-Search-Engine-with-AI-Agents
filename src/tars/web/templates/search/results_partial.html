{% if results %}
    <div class="space-y-4">
        {% for result in results %}
            {% include "partials/search_result.html" %}
        {% endfor %}
    </div>

    <!-- Pagination -->
    {% if pagination.total_pages > 1 %}
    <nav class="mt-8 flex items-center justify-center">
        <div class="flex items-center gap-2">
            <!-- Previous button -->
            {% if pagination.page > 1 %}
            <a href="?q={{ query }}&type={{ search_type }}&page={{ pagination.page - 1 }}{% if keyword_weight %}&keyword_weight={{ keyword_weight }}{% endif %}{% if vector_weight %}&vector_weight={{ vector_weight }}{% endif %}"
               hx-get="/search?q={{ query }}&type={{ search_type }}&page={{ pagination.page - 1 }}{% if keyword_weight %}&keyword_weight={{ keyword_weight }}{% endif %}{% if vector_weight %}&vector_weight={{ vector_weight }}{% endif %}"
               hx-target="#search-results"
               hx-push-url="true"
               class="px-3 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors">
                Previous
            </a>
            {% else %}
            <span class="px-3 py-2 text-sm font-medium text-slate-400 dark:text-slate-600 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg cursor-not-allowed">
                Previous
            </span>
            {% endif %}

            <!-- Page numbers -->
            <div class="hidden sm:flex items-center gap-1">
                {% for p in range(1, pagination.total_pages + 1) %}
                    {% if p == pagination.page %}
                    <span class="px-3 py-2 text-sm font-medium text-white bg-primary-500 rounded-lg">
                        {{ p }}
                    </span>
                    {% elif p == 1 or p == pagination.total_pages or (p >= pagination.page - 2 and p <= pagination.page + 2) %}
                    <a href="?q={{ query }}&type={{ search_type }}&page={{ p }}{% if keyword_weight %}&keyword_weight={{ keyword_weight }}{% endif %}{% if vector_weight %}&vector_weight={{ vector_weight }}{% endif %}"
                       hx-get="/search?q={{ query }}&type={{ search_type }}&page={{ p }}{% if keyword_weight %}&keyword_weight={{ keyword_weight }}{% endif %}{% if vector_weight %}&vector_weight={{ vector_weight }}{% endif %}"
                       hx-target="#search-results"
                       hx-push-url="true"
                       class="px-3 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors">
                        {{ p }}
                    </a>
                    {% elif p == pagination.page - 3 or p == pagination.page + 3 %}
                    <span class="px-2 text-slate-400 dark:text-slate-600">...</span>
                    {% endif %}
                {% endfor %}
            </div>

            <!-- Mobile page indicator -->
            <span class="sm:hidden px-3 py-2 text-sm text-slate-600 dark:text-slate-400">
                Page {{ pagination.page }} of {{ pagination.total_pages }}
            </span>

            <!-- Next button -->
            {% if pagination.page < pagination.total_pages %}
            <a href="?q={{ query }}&type={{ search_type }}&page={{ pagination.page + 1 }}{% if keyword_weight %}&keyword_weight={{ keyword_weight }}{% endif %}{% if vector_weight %}&vector_weight={{ vector_weight }}{% endif %}"
               hx-get="/search?q={{ query }}&type={{ search_type }}&page={{ pagination.page + 1 }}{% if keyword_weight %}&keyword_weight={{ keyword_weight }}{% endif %}{% if vector_weight %}&vector_weight={{ vector_weight }}{% endif %}"
               hx-target="#search-results"
               hx-push-url="true"
               class="px-3 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors">
                Next
            </a>
            {% else %}
            <span class="px-3 py-2 text-sm font-medium text-slate-400 dark:text-slate-600 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg cursor-not-allowed">
                Next
            </span>
            {% endif %}
        </div>
    </nav>
    {% endif %}

{% elif query %}
    <!-- No results state -->
    <div class="text-center py-12">
        <svg class="mx-auto h-12 w-12 text-slate-400 dark:text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <h3 class="mt-4 text-lg font-medium text-slate-900 dark:text-slate-100">No results found</h3>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">
            No links matched your search for "{{ query }}".
        </p>
        <div class="mt-6">
            <a href="/"
               class="inline-flex items-center px-4 py-2 text-sm font-medium text-primary-600 bg-primary-50 dark:bg-primary-900/20 dark:text-primary-400 rounded-lg hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors">
                Try a different search
            </a>
        </div>
    </div>
{% else %}
    <!-- Empty state (no query) -->
    <div class="text-center py-12">
        <svg class="mx-auto h-12 w-12 text-slate-400 dark:text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
        <h3 class="mt-4 text-lg font-medium text-slate-900 dark:text-slate-100">Start searching</h3>
        <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">
            Enter a query above to search your links.
        </p>
    </div>
{% endif %}
